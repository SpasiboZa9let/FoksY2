import { normalize } from "../core/utils.js";

const intentMatchers = {
  greeting: [
    "привет", "хай", "здравствуй", "здарова", "ку", "прив", "добрый день", "доброе утро", "вечер добрый"
  ],
  design: [
    "дизайн", "рисунок", "узор", "пример", "вдохновение", "покажи идеи"
  ],
  confirmBooking: [
    "запиши", "хочу записаться", "давай запишемся", "можно записаться", "хочу прийти"
  ],
  showSomething: [
    "покажи", "посмотреть", "что входит", "что есть", "что предлагаешь"
  ],
  confirm: [
    "да", "ага", "ок", "хорошо", "точно", "давай"
  ],
  abilities: [
    "что ты умеешь", "что можешь", "помощь", "расскажи о себе"
  ],
  booking: [
    "запись", "забронировать", "где записаться", "как попасть", "записаться"
  ],
  mood: [
    "настроение", "подбери", "что подойдет", "по настроению"
  ],
  thanks: [
    "спасибо", "благодарю", "благодарен", "спасибки"
  ],
  bye: [
    "пока", "до свидания", "до встречи", "увидимся", "прощай"
  ],
  smalltalkLite: [
    "как дела", "чем занимаешься", "что нового", "как ты"
  ],
  softWarning: [
    "заткнись", "хватит", "не говори так"
  ],
  styleTalk: [
    "что модно", "тренды", "в моде", "модно", "актуально"
  ],
  about: [
    "кто ты", "ты кто", "что ты такое", "расскажи кто ты"
  ],
  showServices: [
    "услуги", "маникюр", "цены", "прайс", "что делаешь"
  ],
  help: [
    "помоги", "не понимаю", "не знаю", "выбери за меня", "что выбрать"
  ]
};

export function matchIntent(input) {
  const normalized = normalize(input);
  for (const [intent, patterns] of Object.entries(intentMatchers)) {
    if (patterns.some(p => normalized.includes(p))) return intent;
  }
  return null;
}
